- name: Start SonarQube Server
  run: docker run -d --name sonarqube -p 9000:9000 sonarqube:community

- name: Wait for SonarQube Server
  run: |
    until curl --output /dev/null --silent --head --fail http://localhost:9000; do
      echo 'Waiting for SonarQube...'
      sleep 5
    done

- name: Run SonarQube Scan
  env:
    SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
    SONAR_HOST_URL: http://localhost:9000
  run: |
    sonar-scanner \
      -Dsonar.projectKey=<your_project_key> \
      -Dsonar.organization=<your_org> \
      -Dsonar.host.url=$SONAR_HOST_URL \
      -Dsonar.login=$SONAR_TOKEN
