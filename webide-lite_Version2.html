<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebLabs-MobIDE Lite (SU Shell)</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        body { background:#181825; color:#fff; font-family:sans-serif; margin:0; }
        #out { background:#222; border-radius:8px; padding:1em; height:200px; overflow:auto; font-family:monospace; font-size:1em; margin-bottom:1em;}
        input,textarea { background:#333; color:#eee; border-radius:6px; border:none; padding:0.7em; width:100%; margin-bottom:0.7em;}
        button { background:#03b; color:#fff; border-radius:6px; border:none; padding:0.7em 1.2em; font-weight:bold;}
        .touch-btn { font-size:1.2em; }
    </style>
</head>
<body>
    <div style="max-width:420px;margin:auto;padding:1.5em;">
        <h2>WebLabs-MobIDE Lite</h2>
        <div id="out">Ready.</div>
        <input id="cmd" placeholder="Shell command (su -c ...)" autocomplete="off">
        <button id="run" class="touch-btn">Run as root</button>
        <textarea id="code" rows="5" placeholder="Write shell script/code here"></textarea>
        <button id="execScript" class="touch-btn">Execute Script</button>
    </div>
    <script>
        function show(txt) { document.getElementById('out').textContent = txt; }
        document.getElementById('run').onclick = async function() {
            show("Running...");
            const resp = await fetch('/api/su', {
                method: 'POST',
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify({command: document.getElementById('cmd').value})
            });
            show(await resp.text());
        };
        document.getElementById('execScript').onclick = async function() {
            show("Executing...");
            const resp = await fetch('/api/script', {
                method: 'POST',
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify({script: document.getElementById('code').value})
            });
            show(await resp.text());
        };
    </script>
</body>
</html>